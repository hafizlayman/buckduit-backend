services:
  buckduit-api:
    envs:
      - SUPABASE_URL
      - SUPABASE_SERVICE_KEY
      - SUPABASE_TABLE
      - TELEGRAM_BOT_TOKEN
      - TELEGRAM_CHAT_ID
      - OPENAI_API_KEY
      - PORT
      - FLASK_ENV
    startCommand: ./start.sh web
    autoDeploy: true
    restartPolicyType: always

  buckduit-ai-core:
    envs:
      - SUPABASE_URL
      - SUPABASE_SERVICE_KEY
      - TELEGRAM_BOT_TOKEN
      - TELEGRAM_CHAT_ID
      - OPENAI_API_KEY
    startCommand: ./start.sh worker
    autoDeploy: true
    restartPolicyType: always
